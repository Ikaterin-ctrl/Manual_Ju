/* ==========================================================================
   BUSSOLA.CSS - VERSÃO FINAL COM ENGENHARIA CORRETA
   ========================================================================== */

/* --- FASE 1: FONTES E VARIÁVEIS DE DESIGN --- */
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,700;1,400&family=Poppins:wght@300;400&display=swap');

:root {
    --cor-fundo-bordo: #5a1a3a;
    --cor-painel: rgba(250, 245, 235, 0.97);
    --cor-texto-claro: #FDF5E6;
    --cor-texto-painel: #3B2E2E;
    --cor-titulo-painel: #8C2F39;
    --fonte-titulos: 'Cormorant Garamond', serif;
    --fonte-textos: 'Poppins', sans-serif;
}

/* --- FASE 2: SETUP GLOBAL --- */
body {
    font-family: var(--fonte-textos);
    background-color: var(--cor-fundo-bordo);
    color: var(--cor-texto-claro);
    min-height: 100vh;
    width: 100vw;
    overflow-x: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0;
    padding: 20px;
}

* { box-sizing: border-box; }

/* --- FASE 3: A COLAGEM DE FUNDO FLUTUANTE --- */
.background-collage {
    position: fixed; top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    pointer-events: none;
}
.collage-element {
    position: absolute;
    opacity: 0.1;
    animation: flutuar 40s ease-in-out infinite alternate;
}
.element-anatomy { width: 350px; top: 15%; left: -5%; }
.element-crown { width: 300px; bottom: -5%; right: -5%; }
.element-bat { width: 250px; top: 10%; right: 15%; }
.element-pisces { width: 220px; bottom: 20%; left: 10%; }

@keyframes flutuar {
    from { transform: translateY(0px) rotate(-5deg); }
    to { transform: translateY(-60px) rotate(5deg); }
}

/* --- FASE 4: A "MOLDURA" E A CENA PRINCIPAL --- */
.anatomy-container {
    position: relative;
    width: 90%;
    max-width: 500px; /* Largura máxima da nossa imagem no desktop */
    margin: auto;
    /* Força a moldura a ter a mesma proporção da imagem. Ajuste se necessário. */
    aspect-ratio: 1 / 1.5; 
}

.anatomy-image-base {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    object-fit: contain;
    filter: drop-shadow(0px 10px 30px rgba(0,0,0,0.4));
}

.anatomy-points {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 2;
}

/* --- FASE 5: PONTOS DE INTERESSE (BOTÕES DE IMAGEM) --- */
.interest-point {
    position: absolute;
    height: auto;
    cursor: pointer;
    animation: brilho-flutuante 4s ease-in-out infinite;
    transition: transform 0.3s ease;
    transform-origin: center center; /* Garante que a escala e rotação sejam a partir do centro */
}
.interest-point:hover {
    transform: scale(1.2) !important;
    animation-play-state: paused;
}
.interest-point img { width: 100%; }

@keyframes brilho-flutuante {
    0%   { filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.4)); transform: translateY(0px); }
    50%  { filter: drop-shadow(0px 0px 20px rgba(255,255,255,0.4)) brightness(1.1); transform: translateY(-5px); }
    100% { filter: drop-shadow(5px 5px 10px rgba(0,0,0,0.4)); transform: translateY(0px); }
}

/* SEU POSICIONAMENTO MANUAL DENTRO DA NOVA ESTRUTURA */
/* Os valores agora são em % para serem responsivos junto com a moldura */
.point-head { top:1%;left:45%; width: 33%; transform: translateX(-50%); z-index: 5; }
.point-eyes { top: 14%; left: 50%; width: 20%; transform: translateX(-50%); z-index: 5; }
.point-mouth { top: 19%; left: 57%; width: 8%; transform: translateX(-50%); z-index: 5; }
.point-heart { top: 28%; left: 57%; width: 15%; transform: translateX(-50%); z-index: 6; }
.point-spine { top: 23%; left: 38%; width: 43%; transform: translateX(-50%); z-index: 5; }
.point-hand-left { top: 28%; left: 6%; width: 28%; transform: rotate(0deg); z-index: 5; }
.point-hand-right { top: 45%; right: 5%; width: 28%; transform: rotate(-15deg); z-index: 5; }


/* --- FASE 6: PAINÉIS DE FERRAMENTAS (POP-UPS) --- */
.tool-container {
    position: fixed; z-index: 100;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%) scale(0.9);
    width: 90%; max-width: 800px;
    max-height: 80vh; overflow-y: auto;
    background: var(--cor-painel);
    color: var(--cor-texto-painel);
    border: 4px double var(--cor-titulo-painel);
    border-radius: 15px;
    box-shadow: 0 10px 50px rgba(0,0,0,0.5);
    padding: 40px;
    opacity: 0; pointer-events: none;
    transition: opacity 0.4s ease, transform 0.4s ease;
}
/* ... (demais estilos para .tool-container.visible, .close-button, .tool-grid-container, etc.) ... */

